<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>

</body>
</html>
<script>

    //立即执行函数
    var myImg = (function () {
        //在页面上创建img元素
        var img = document.createElement("img");
        document.body.appendChild(img);
        return {
            setImg: function (src) {
                img.src = src
            }
        }
    })()

    var proxyImg = (function () {
        //img对象 提前加载一张图片如果给这个图片加了一个src属性后就相当于在浏览器中缓存了一张图片
        var image = new Image();
        image.onload = function () {
            alert("加载完毕")
            myImg.setImg(image.src);
        }
        return {
            setSrc: function (src) {
                //loding
                myImg.setImg("./react.gif");
                //需要加载的图片
                setTimeout(() => {
                    image.src = src;
                }, 3000);
            }
        }
    })()

    //定义需要加载的图片路径
    var src = "./react.jpg";
    // 调用函数
    proxyImg.setSrc(src);

</script>